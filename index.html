<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>쿠팡 김해 클러스터 근무 시작까지 남은 시간</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#000;
      --text:#fff;
      --muted:#ccc;
      --accent:#0D3BB3;
      --danger:#e53935;
      --progress-height:20px;
      --max-width:720px;
    }
    *{box-sizing:border-box}
    body{
      font-family:'Noto Sans KR',sans-serif;
      margin:0;
      padding:24px;
      background:var(--bg);
      color:var(--text);
      display:flex;
      justify-content:center;
      align-items:flex-start;
      min-height:100vh;
      line-height:1.4;
    }

    .card{
      width:100%;
      max-width:var(--max-width);
      text-align:center;
      padding:28px;
      border-radius:12px;
    }

    #title {
      margin-top:3.5rem;
      margin-bottom:10px;
    }
    .title-line1{
      font-size:1.8rem;
      font-weight:700;
    }
    .title-line2{
      font-size:1.2rem;
      font-weight:600;
      margin-top:6px;
    }
    .address{
      margin:8px 0 14px;
      color:var(--muted);
      font-size:1rem;
    }

    .timer-container{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }

    #alarm-icon{
      font-size:1.6rem;
      user-select:none;
      display:inline-block;
      line-height:1;
    }

    #timer{
      font-size:5rem;
      font-weight:800;
      margin:4px 0 0;
      line-height:1;
    }

    .blinking{
      color:var(--danger) !important;
      animation:blink-visibility 1s step-start infinite;
    }

    @keyframes blink-visibility{
      0%,49%{visibility:visible}
      50%,100%{visibility:hidden}
    }

    .progress-bar-container{
      width:100%;
      max-width:450px;
      height:var(--progress-height);
      background:#eee;
      border-radius:999px;
      overflow:hidden;
      margin-top:18px;
      position:relative;
    }

    .progress-bar-fill{
      height:100%;
      width:0%;
      background:var(--accent);
      transition:width 0.4s ease, background-color 0.2s ease;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }

    .progress-bar-text{
      position:absolute;
      width:100%;
      text-align:center;
      pointer-events:none;
      font-weight:700;
      font-size:0.95rem;
      z-index:2;
      user-select:none;
      color:#000;
    }

    .progress-bar-danger{
      background:var(--danger) !important;
    }

    img.logo{
      max-height:120px;
      border-radius:10px;
      margin-top:18px;
      object-fit:cover;
      display:block;
    }

    .work-message{
      margin-top:12px;
      font-size:1.1rem;
      color:var(--text);
      font-weight:700;
    }

    @media (max-width:600px){
      #timer{font-size:3.2rem}
      .title-line1{font-size:1.3rem}
      .title-line2{font-size:1rem}
      .progress-bar-container{max-width:100%}
      img.logo{max-height:90px}
    }
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="근무 시작 타이머">
    <header id="title">
      <div class="title-line1" id="work-name">김해 클러스터 소분3(2W)</div>
      <div class="address" id="work-address">근무지 주소 : 김해시 상동로 680-59 </div>
      <div class="title-line2"><span id="work-date">--월 --일</span> 근무 시작까지 남은 시간</div>
    </header>

    <div class="timer-container" aria-live="polite">
      <div id="alarm-icon" class="blinking-icon" aria-hidden="true">⏰</div>
      <div id="timer" aria-atomic="true">00시간 00분 00초</div>

      <div class="progress-bar-container" aria-hidden="false" aria-label="남은 시간 진행 표시">
        <div class="progress-bar-fill" id="progress-bar" role="presentation" aria-hidden="true">
        </div>
        <div class="progress-bar-text" id="progress-text">00:00:00</div>
      </div>

      <img src="IMG_0982.png" alt="회사 로고" class="logo" onerror="this.style.display='none'" />
      <div class="work-message">신분증 필참 부탁드립니다!</div>
    </div>
  </div>

  <script>
    /******************************
     * CONFIG — 근무 시작 시간만 수정됨
     ******************************/
    const CONFIG = {
      workName: '김해 클러스터 소분3(2W)',
      workAddress: '김해시 상동로 680-59',
      useDailyTarget: true,
      targetHour: 1,
      targetMinute: 0,
      dangerThresholdMs: 3 * 60 * 60 * 1000
    };

    document.getElementById('work-name').textContent = CONFIG.workName;
    document.getElementById('work-address').textContent = '근무지 주소 : ' + CONFIG.workAddress;

    function getNextTarget(now) {
      const t = new Date(now);
      t.setHours(CONFIG.targetHour, CONFIG.targetMinute || 0, 0, 0);
      if (now >= t) t.setDate(t.getDate() + 1);
      return t;
    }

    function pad(n){ return String(n).padStart(2,'0'); }

    function parseRGB(str) {
      const nums = str.match(/\d+(\.\d+)?/g);
      if (!nums) return null;
      const [r,g,b,a] = nums.map(Number);
      return { r, g, b, a: a ?? 1 };
    }
    function luminance(r,g,b){
      const a = [r,g,b].map(v=>{
        v = v/255;
        return v <= 0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
      });
      return 0.2126*a[0] + 0.7152*a[1] + 0.0722*a[2];
    }
    function contrastTextColor(bgString){
      const rgb = parseRGB(bgString);
      if (!rgb) return '#fff';
      const L = luminance(rgb.r, rgb.g, rgb.b);
      return L > 0.5 ? '#000' : '#fff';
    }

    function formatDateLabel(date){
      return `${date.getMonth()+1}월 ${date.getDate()}일`;
    }

    function updateTimer(){
      const now = new Date();
      const target = getNextTarget(now);
      const diffMs = target - now;
      const totalSec = Math.max(0, Math.floor(diffMs / 1000));
      const hours = Math.floor(totalSec / 3600);
      const minutes = Math.floor((totalSec % 3600) / 60);
      const seconds = totalSec % 60;

      const timerEl = document.getElementById('timer');
      timerEl.textContent = `${pad(hours)}시간 ${pad(minutes)}분 ${pad(seconds)}초`;

      document.getElementById('work-date').textContent = formatDateLabel(target);

      let previous = new Date(target);
      previous.setDate(previous.getDate() - 1);
      const totalPeriod = target - previous;
      const elapsed = now - previous;
      const percent = Math.min(100, Math.max(0, (elapsed / totalPeriod) * 100));

      const progressBar = document.getElementById('progress-bar');
      progressBar.style.width = `${percent}%`;

      const progressText = document.getElementById('progress-text');
      progressText.textContent = `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;

      if (diffMs <= CONFIG.dangerThresholdMs) {
        timerEl.classList.add('blinking');
        document.getElementById('alarm-icon').classList.add('blinking');
        progressBar.classList.add('progress-bar-danger');
      } else {
        timerEl.classList.remove('blinking');
        document.getElementById('alarm-icon').classList.remove('blinking');
        progressBar.classList.remove('progress-bar-danger');
      }

      const computedBg = window.getComputedStyle(progressBar).backgroundColor;
      const textColor = contrastTextColor(computedBg);
      progressText.style.color = textColor;
    }

    updateTimer();
    setInterval(updateTimer, 1000);
  </script>
</body>
</html>
